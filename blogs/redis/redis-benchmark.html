<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis Benchmark | saenai</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">
    <link rel="stylesheet" href="https://gitcdn.xyz/cdn/goessner/markdown-it-texmath/master/texmath.css">
    <script src="https://github.com/markdown-it/markdown-it/blob/master/bin/markdown-it.js"></script>
    <script src="https://gitcdn.xyz/cdn/goessner/markdown-it-texmath/master/texmath.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.eb5f38e4.css" as="style"><link rel="preload" href="/assets/js/app.ddc20802.js" as="script"><link rel="preload" href="/assets/js/3.0df74ec8.js" as="script"><link rel="preload" href="/assets/js/1.59174756.js" as="script"><link rel="preload" href="/assets/js/33.115c8f71.js" as="script"><link rel="prefetch" href="/assets/js/10.e867ee1d.js"><link rel="prefetch" href="/assets/js/11.bd0b66f9.js"><link rel="prefetch" href="/assets/js/12.17150097.js"><link rel="prefetch" href="/assets/js/13.16137f3e.js"><link rel="prefetch" href="/assets/js/14.8ca46983.js"><link rel="prefetch" href="/assets/js/15.149e7f1a.js"><link rel="prefetch" href="/assets/js/16.e67b44e9.js"><link rel="prefetch" href="/assets/js/17.ac363ea8.js"><link rel="prefetch" href="/assets/js/18.4a4e9557.js"><link rel="prefetch" href="/assets/js/19.b0c8f724.js"><link rel="prefetch" href="/assets/js/20.1ae5a203.js"><link rel="prefetch" href="/assets/js/21.fd0c94e9.js"><link rel="prefetch" href="/assets/js/22.749aa1d8.js"><link rel="prefetch" href="/assets/js/23.ab12a7ee.js"><link rel="prefetch" href="/assets/js/24.0a829f12.js"><link rel="prefetch" href="/assets/js/25.e1155b23.js"><link rel="prefetch" href="/assets/js/26.1c035556.js"><link rel="prefetch" href="/assets/js/27.f95dfc0d.js"><link rel="prefetch" href="/assets/js/28.059e2ae2.js"><link rel="prefetch" href="/assets/js/29.36044e6d.js"><link rel="prefetch" href="/assets/js/30.045485ce.js"><link rel="prefetch" href="/assets/js/31.422baf18.js"><link rel="prefetch" href="/assets/js/32.59090d5d.js"><link rel="prefetch" href="/assets/js/34.bac7efcb.js"><link rel="prefetch" href="/assets/js/35.f12cb7ec.js"><link rel="prefetch" href="/assets/js/4.1086e75c.js"><link rel="prefetch" href="/assets/js/5.045ef072.js"><link rel="prefetch" href="/assets/js/6.428d8d5a.js"><link rel="prefetch" href="/assets/js/7.42851f4a.js"><link rel="prefetch" href="/assets/js/8.e40a418a.js"><link rel="prefetch" href="/assets/js/9.59b01fe1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.eb5f38e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>saenai</h3> <p class="description" data-v-59e6cb88></p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>saenai</span>
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="saenai" class="logo"> <span class="site-name">saenai</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/aws/" class="nav-link"><i class="undefined"></i>
  aws
</a></li><li class="dropdown-item"><!----> <a href="/categories/aws - exam/" class="nav-link"><i class="undefined"></i>
  aws - exam
</a></li><li class="dropdown-item"><!----> <a href="/categories/reading/" class="nav-link"><i class="undefined"></i>
  reading
</a></li><li class="dropdown-item"><!----> <a href="/categories/奇怪的知识/" class="nav-link"><i class="undefined"></i>
  奇怪的知识
</a></li><li class="dropdown-item"><!----> <a href="/categories/redis/" class="nav-link"><i class="undefined"></i>
  redis
</a></li><li class="dropdown-item"><!----> <a href="/categories/docker/" class="nav-link"><i class="undefined"></i>
  docker
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/avatar.webp" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    saenai
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>25</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>8</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/aws/" class="nav-link"><i class="undefined"></i>
  aws
</a></li><li class="dropdown-item"><!----> <a href="/categories/aws - exam/" class="nav-link"><i class="undefined"></i>
  aws - exam
</a></li><li class="dropdown-item"><!----> <a href="/categories/reading/" class="nav-link"><i class="undefined"></i>
  reading
</a></li><li class="dropdown-item"><!----> <a href="/categories/奇怪的知识/" class="nav-link"><i class="undefined"></i>
  奇怪的知识
</a></li><li class="dropdown-item"><!----> <a href="/categories/redis/" class="nav-link"><i class="undefined"></i>
  redis
</a></li><li class="dropdown-item"><!----> <a href="/categories/docker/" class="nav-link"><i class="undefined"></i>
  docker
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>Redis Benchmark</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>saenai</span>
          
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Redis Benchmark</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>saenai</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>4/21/2023</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>redis</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="context">Context</h2> <p>During my work, we met some issue when we're using Redis. The latency for pipeline is quite high in our service. We're putting some HGET CMD into the pipeline, I'm thinking use the SET instead of the HGET, since we only have 1 field in the hash.</p> <p>If you're using datadog, some metrics may can show you the latency for different CMDs easily. Like <code>aws.elasticache.get_type_cmds_latency</code> and <code>aws.elasticache.hash_based_cmds_latency</code>. For more details, can refer to the <a href="https://docs.datadoghq.com/integrations/amazon_elasticache/#data-collected" target="_blank" rel="noopener noreferrer">offical doc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>After some reserach, I found Redis already include a utility named <a href="https://redis.io/docs/management/optimization/benchmarks/" target="_blank" rel="noopener noreferrer">redis-benchmark<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, so I'd like to record some usage for this tool.
Although this article is a summary of the offical doc, but it's still better to read the offical doc, there're some useful point for redis performance.</p> <h2 id="usage">Usage</h2> <p>The followings are the usage from offial website.</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>Usage: redis-benchmark <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> <span class="token punctuation">[</span>COMMAND ARGS<span class="token punctuation">..</span>.<span class="token punctuation">]</span>

Options:
 <span class="token parameter variable">-h</span> <span class="token operator">&lt;</span>hostname<span class="token operator">&gt;</span>      Server <span class="token function">hostname</span> <span class="token punctuation">(</span>default <span class="token number">127.0</span>.0.1<span class="token punctuation">)</span>
 <span class="token parameter variable">-p</span> <span class="token operator">&lt;</span>port<span class="token operator">&gt;</span>          Server port <span class="token punctuation">(</span>default <span class="token number">6379</span><span class="token punctuation">)</span>
 <span class="token parameter variable">-s</span> <span class="token operator">&lt;</span>socket<span class="token operator">&gt;</span>        Server socket <span class="token punctuation">(</span>overrides <span class="token function">host</span> and port<span class="token punctuation">)</span>
 <span class="token parameter variable">-a</span> <span class="token operator">&lt;</span>password<span class="token operator">&gt;</span>      Password <span class="token keyword">for</span> Redis Auth
 <span class="token parameter variable">--user</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>  Used to send ACL style <span class="token string">'AUTH username pass'</span><span class="token builtin class-name">.</span> Needs -a.
 <span class="token parameter variable">-u</span> <span class="token operator">&lt;</span>uri<span class="token operator">&gt;</span>           Server URI.
 <span class="token parameter variable">-c</span> <span class="token operator">&lt;</span>clients<span class="token operator">&gt;</span>       Number of parallel connections <span class="token punctuation">(</span>default <span class="token number">50</span><span class="token punctuation">)</span>
 <span class="token parameter variable">-n</span> <span class="token operator">&lt;</span>requests<span class="token operator">&gt;</span>      Total number of requests <span class="token punctuation">(</span>default <span class="token number">100000</span><span class="token punctuation">)</span>
 <span class="token parameter variable">-d</span> <span class="token operator">&lt;</span>size<span class="token operator">&gt;</span>          Data size of SET/GET value <span class="token keyword">in</span> bytes <span class="token punctuation">(</span>default <span class="token number">3</span><span class="token punctuation">)</span>
 <span class="token parameter variable">--dbnum</span> <span class="token operator">&lt;</span>db<span class="token operator">&gt;</span>       SELECT the specified db number <span class="token punctuation">(</span>default <span class="token number">0</span><span class="token punctuation">)</span>
 <span class="token parameter variable">-3</span>                 Start session <span class="token keyword">in</span> RESP3 protocol mode.
 <span class="token parameter variable">--threads</span> <span class="token operator">&lt;</span>num<span class="token operator">&gt;</span>    Enable multi-thread mode.
 <span class="token parameter variable">--cluster</span>          Enable cluster mode.
                    If the <span class="token builtin class-name">command</span> is supplied on the <span class="token builtin class-name">command</span> line <span class="token keyword">in</span> cluster
                    mode, the key must contain <span class="token string">&quot;{tag}&quot;</span><span class="token builtin class-name">.</span> Otherwise, the
                    <span class="token builtin class-name">command</span> will not be sent to the right cluster node.
 --enable-tracking  Send CLIENT TRACKING on before starting benchmark.
 <span class="token parameter variable">-k</span> <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span>       <span class="token assign-left variable">1</span><span class="token operator">=</span>keep alive <span class="token assign-left variable">0</span><span class="token operator">=</span>reconnect <span class="token punctuation">(</span>default <span class="token number">1</span><span class="token punctuation">)</span>
 <span class="token parameter variable">-r</span> <span class="token operator">&lt;</span>keyspacelen<span class="token operator">&gt;</span>   Use random keys <span class="token keyword">for</span> SET/GET/INCR, random values <span class="token keyword">for</span> SADD,
                    random members and scores <span class="token keyword">for</span> ZADD.
                    Using this option the benchmark will <span class="token function">expand</span> the string
                    __rand_int__ inside an argument with a <span class="token number">12</span> digits number <span class="token keyword">in</span>
                    the specified range from <span class="token number">0</span> to keyspacelen-1. The
                    substitution changes every <span class="token function">time</span> a <span class="token builtin class-name">command</span> is executed.
                    Default tests use this to hit random keys <span class="token keyword">in</span> the specified
                    range.
                    Note: If <span class="token parameter variable">-r</span> is omitted, all commands <span class="token keyword">in</span> a benchmark will
                    use the same key.
 <span class="token parameter variable">-P</span> <span class="token operator">&lt;</span>numreq<span class="token operator">&gt;</span>        Pipeline <span class="token operator">&lt;</span>numreq<span class="token operator">&gt;</span> requests. Default <span class="token number">1</span> <span class="token punctuation">(</span>no pipeline<span class="token punctuation">)</span>.
 <span class="token parameter variable">-q</span>                 Quiet. Just show query/sec values
 <span class="token parameter variable">--precision</span>        Number of decimal places to display <span class="token keyword">in</span> latency output <span class="token punctuation">(</span>default <span class="token number">0</span><span class="token punctuation">)</span>
 <span class="token parameter variable">--csv</span>              Output <span class="token keyword">in</span> CSV <span class="token function">format</span>
 <span class="token parameter variable">-l</span>                 Loop. Run the tests forever
 <span class="token parameter variable">-t</span> <span class="token operator">&lt;</span>tests<span class="token operator">&gt;</span>         Only run the comma separated list of tests. The <span class="token builtin class-name">test</span>
                    names are the same as the ones produced as output.
                    The <span class="token parameter variable">-t</span> option is ignored <span class="token keyword">if</span> a specific <span class="token builtin class-name">command</span> is supplied
                    on the <span class="token builtin class-name">command</span> line.
 <span class="token parameter variable">-I</span>                 Idle mode. Just <span class="token function">open</span> N idle connections and wait.
 <span class="token parameter variable">-x</span>                 Read last argument from STDIN.
 <span class="token parameter variable">--tls</span>              Establish a secure TLS connection.
 <span class="token parameter variable">--sni</span> <span class="token operator">&lt;</span>host<span class="token operator">&gt;</span>       Server name indication <span class="token keyword">for</span> TLS.
 <span class="token parameter variable">--cacert</span> <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>    CA Certificate <span class="token function">file</span> to verify with.
 <span class="token parameter variable">--cacertdir</span> <span class="token operator">&lt;</span>dir<span class="token operator">&gt;</span>  Directory where trusted CA certificates are stored.
                    If neither cacert nor cacertdir are specified, the default
                    system-wide trusted root certs configuration will apply.
 <span class="token parameter variable">--insecure</span>         Allow insecure TLS connection by skipping cert validation.
 <span class="token parameter variable">--cert</span> <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>      Client certificate to authenticate with.
 <span class="token parameter variable">--key</span> <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>       Private key <span class="token function">file</span> to authenticate with.
 --tls-ciphers <span class="token operator">&lt;</span>list<span class="token operator">&gt;</span> Sets the list of preferred ciphers <span class="token punctuation">(</span>TLSv1.2 and below<span class="token punctuation">)</span>
                    <span class="token keyword">in</span> order of preference from highest to lowest separated by colon <span class="token punctuation">(</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span>.
                    See the ciphers<span class="token punctuation">(</span>1ssl<span class="token punctuation">)</span> manpage <span class="token keyword">for</span> <span class="token function">more</span> information about the syntax of this string.
 --tls-ciphersuites <span class="token operator">&lt;</span>list<span class="token operator">&gt;</span> Sets the list of preferred ciphersuites <span class="token punctuation">(</span>TLSv1.3<span class="token punctuation">)</span>
                    <span class="token keyword">in</span> order of preference from highest to lowest separated by colon <span class="token punctuation">(</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span>.
                    See the ciphers<span class="token punctuation">(</span>1ssl<span class="token punctuation">)</span> manpage <span class="token keyword">for</span> <span class="token function">more</span> information about the syntax of this string,
                    and specifically <span class="token keyword">for</span> TLSv1.3 ciphersuites.
 <span class="token parameter variable">--help</span>             Output this <span class="token builtin class-name">help</span> and exit.
 <span class="token parameter variable">--version</span>          Output version and exit.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><h3 id="just-show-the-query-sec-values">Just show the query/sec values</h3> <p>Usually, we don't need run all CMDs during our test. We can use the <code>-q</code> option to only show the query/sec values. If we omit the <code>-q</code>, the output may over 1000 lines.</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># redis-benchmark -q</span>
PING_INLINE: <span class="token number">209643.61</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.119</span> msec                    
PING_MBULK: <span class="token number">201612.91</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.127</span> msec                    
SET: <span class="token number">214592.28</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.119</span> msec                    
GET: <span class="token number">216450.20</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.119</span> msec                    
INCR: <span class="token number">213675.22</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.119</span> msec                    
LPUSH: <span class="token number">223713.64</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.119</span> msec                    
RPUSH: <span class="token number">225733.64</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.119</span> msec                    
LPOP: <span class="token number">220264.31</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.119</span> msec                    
RPOP: <span class="token number">224719.11</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.119</span> msec                    
SADD: <span class="token number">217391.30</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.119</span> msec                    
HSET: <span class="token number">223214.28</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.119</span> msec                    
SPOP: <span class="token number">212765.95</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.119</span> msec                    
ZADD: <span class="token number">225733.64</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.119</span> msec                    
ZPOPMIN: <span class="token number">214132.77</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.119</span> msec                    
LPUSH <span class="token punctuation">(</span>needed to benchmark LRANGE<span class="token punctuation">)</span>: <span class="token number">228310.50</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.111</span> msec                    
LRANGE_100 <span class="token punctuation">(</span>first <span class="token number">100</span> elements<span class="token punctuation">)</span>: <span class="token number">84175.09</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.303</span> msec                   
LRANGE_300 <span class="token punctuation">(</span>first <span class="token number">300</span> elements<span class="token punctuation">)</span>: <span class="token number">33852.40</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.751</span> msec                   
LRANGE_500 <span class="token punctuation">(</span>first <span class="token number">500</span> elements<span class="token punctuation">)</span>: <span class="token number">23457.66</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">1.055</span> msec                   
LRANGE_600 <span class="token punctuation">(</span>first <span class="token number">600</span> elements<span class="token punctuation">)</span>: <span class="token number">20100.50</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">1.239</span> msec                   
MSET <span class="token punctuation">(</span><span class="token number">10</span> keys<span class="token punctuation">)</span>: <span class="token number">197238.64</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.167</span> msec
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="only-run-specific-cmds">Only run specific CMDs</h3> <p>Sometimes, we only care about some specific keys, in that case, we can use <code>-t</code></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># redis-benchmark -t get,lpush -q -n 1000</span>
GET: <span class="token number">142857.14</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.159</span> msec        
LPUSH: <span class="token number">200000.00</span> requests per second, <span class="token assign-left variable">p50</span><span class="token operator">=</span><span class="token number">0.119</span> msec
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="examples">examples</h2> <div class="custom-block tip"><p class="title"></p><p>If you want to test a remote service, please use <code>redis-benchmark -h host -p &lt;port&gt;</code> spec the host and port.</p></div><p>The key params will highlight in the CMD</p> <table><thead><tr><th>Description</th> <th>CMD</th> <th>tips</th></tr></thead> <tbody><tr><td>I'd like to perform a test with 1000 requests</td> <td>redis-benchmark -q <code>-n</code> 100000</td> <td></td></tr> <tr><td>Only test specific CMDs</td> <td>redis-benchmark <code>-t set,get</code> -q -n 100000</td> <td></td></tr> <tr><td>Test pipeline</td> <td>redis-benchmark -q -n 100000 -t set,get <code>-P 100</code></td> <td>using pipeline can significant increase the performance</td></tr> <tr><td>Test for cluster</td> <td>redis-benchmark -q -n 100000 -t set,get -P 100 <code>--cluster</code></td> <td>only support when your redis in cluster mode</td></tr></tbody></table></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">6/24/2023, 9:59:29 PM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blogs/redis/redis-benchmark.html#context" class="sidebar-link reco-side-context" data-v-b57cc07c>Context</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/redis/redis-benchmark.html#usage" class="sidebar-link reco-side-usage" data-v-b57cc07c>Usage</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/redis/redis-benchmark.html#just-show-the-query-sec-values" class="sidebar-link reco-side-just-show-the-query-sec-values" data-v-b57cc07c>Just show the query/sec values</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/redis/redis-benchmark.html#only-run-specific-cmds" class="sidebar-link reco-side-only-run-specific-cmds" data-v-b57cc07c>Only run specific CMDs</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/redis/redis-benchmark.html#examples" class="sidebar-link reco-side-examples" data-v-b57cc07c>examples</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.ddc20802.js" defer></script><script src="/assets/js/3.0df74ec8.js" defer></script><script src="/assets/js/1.59174756.js" defer></script><script src="/assets/js/33.115c8f71.js" defer></script>
  </body>
</html>
